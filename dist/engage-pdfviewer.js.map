{"version":3,"sources":["webpack://EngagePDFViewer/webpack/universalModuleDefinition","webpack://EngagePDFViewer/webpack/bootstrap","webpack://EngagePDFViewer/./src/engage-pdfviewer.js","webpack://EngagePDFViewer/./src/fullscreen.js"],"names":["window","pdfjsLib","pdfjsViewer","getDocument","PDFViewer","console","log","animationStartedPromise","animationStartedClosure","Promise","resolve","requestAnimationFrame","id","generateId","userAgent","navigator","platform","maxTouchPoints","isAndroid","test","isIOS","USE_ONLY_CSS_ZOOM","TEXT_LAYER_MODE","EXTERNAL_LINK_TARGET","MAX_MOBILE_IMAGE_SIZE","CMAP_PACKED","DEFAULT_SCALE","CSS_UNITS","DEFAULT_SCALE_DELTA","MIN_SCALE","MAX_SCALE","DEFAULT_SCALE_VALUE","EngagePDFViewer","viewerContainer","document","getElementById","pdfContainer","createElement","classList","add","appendChild","hasAttribute","setAttribute","pdfLoadingTask","pdfDocument","pdfViewer","pdfHistory","pdfLinkService","l10n","metadata","documentInfo","eventBus","EventBus","dispatchToDOM","_createUI","ResizeObserver","lastContainerSize","resizeObserver","entries","entry","newWidth","contentRect","width","_rescaleIfNecessary","addEventListener","evt","documentElement","path","composedPath","found","find","el","contains","remove","zoomer","deltaY","zoomIn","Math","abs","zoomOut","ctrlKey","fullScreenApi","isFullscreen","preventDefault","options","then","_open","pageNumber","page","querySelector","scrollIntoView","error","promise","destroy","setDocument","reset","loadingBar","value","removeAttribute","ticks","scaleFactor","newScale","currentScale","toFixed","ceil","min","currentScaleValue","floor","max","close","params","bind","worker_url","GlobalWorkerOptions","workerSrc","url","docOptions","maxImageSize","max_mobile_image_size","loadingTask","showLoadingBar","_clearData","onProgress","progressData","total","loaded","initialize","fingerprint","hideLoadingBar","toolbar","_loadMetaData","setTimeout","pagesCount","pagerTotal","parentNode","previousPageButton","exception","message","loadingErrorMessage","InvalidPDFException","get","MissingPDFException","UnexpectedResponseException","msg","_showError","_createPDFViewer","_createLoadingBar","_createErrorViewer","_createToolBar","_initUI","div","viewer","element","bar","_createNavButtons","_createPager","_createZoomButtons","_createDownloadButton","_createFullscreenButton","container","previous","innerText","next","nextPageButton","pagerLabel","inputId","stopPropagation","select","newPage","parseInt","pageTotal","pagerNumber","textContent","attributeName","undefined","parent","body","getAttribute","download","fileName","_getParentAttribute","fileId","location","fullscreenButton","PDFLinkService","externalLinkTarget","NullL10n","pdfViewerOptions","linkService","useOnlyCssZoom","textLayerMode","cMapPacked","setViewer","PDFHistory","setHistory","supportsFullscreen","exitFullscreen","requestFullscreen","fullscreenEventName","target","scrollPageIntoView","on","_handleNavigationEnabling","clientWidth","observe","tryCount","newTryCount","hasScrollBar","scrollWidth","numPages","disabled","getMetadata","data","info","Title","Subject","title","PDFFormatVersion","Producer","trim","Creator","IsAcroFormPresent","version","pdfTitle","md","has","doc","val","currentPageNumber","prefix","browserPrefixes","split","cancelFullScreen","i","il","length","fullScreen","fullscreenElement","webkitIsFullScreen","requestFullScreen","exitFullScreen"],"mappings":"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","file":"engage-pdfviewer.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"EngagePDFViewer\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"EngagePDFViewer\"] = factory();\n\telse\n\t\troot[\"EngagePDFViewer\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import fullScreenApi from \"./fullscreen\";\r\n// Rendering issue references: https://www.pdftron.com/blog/pdf-js/guide-to-pdf-js-rendering/\r\nif (!window.pdfjsLib || !window.pdfjsViewer ||\r\n\t\t!pdfjsLib.getDocument || !pdfjsViewer.PDFViewer) {\r\n\tconsole.log(\"Please include the pdfjs-dist library.\");\r\n}\r\nlet animationStartedPromise;\r\n(function animationStartedClosure() {\r\n\t// The offsetParent is not set until the PDF.js iframe or object is visible.\r\n\t// Waiting for first animation.\r\n\tanimationStartedPromise = new Promise(function (resolve) {\r\n\t\twindow.requestAnimationFrame(resolve);\r\n\t});\r\n})();\r\n\r\nlet id = 0;\r\n\r\nfunction generateId() {\r\n\tid++;\r\n\treturn `epdf_${id}`;\r\n}\r\n\r\nconst userAgent =\r\n\t\t(typeof navigator !== \"undefined\" && navigator.userAgent) || \"\";\r\nconst platform =\r\n\t\t(typeof navigator !== \"undefined\" && navigator.platform) || \"\";\r\nconst maxTouchPoints =\r\n\t\t(typeof navigator !== \"undefined\" && navigator.maxTouchPoints) || 1;\r\n\r\nconst isAndroid = /Android/.test(userAgent);\r\nconst isIOS =\r\n\t\t/\\b(iPad|iPhone|iPod)(?=;)/.test(userAgent) ||\r\n\t\t(platform === \"MacIntel\" && maxTouchPoints > 1);\r\n\r\n// Best explanation I can found for some settings is in the chrome extension\r\n//   see extensions/chromium/preferences_schema.json in the pdfjs project\r\n\r\nconst USE_ONLY_CSS_ZOOM = false;\r\n// textLayerMode: Controls if the text layer is enabled, and the selection mode that is used.\r\n//  0 = Disabled.\r\n//  1 = Enabled.\r\n//  2 = (Experimental) Enabled, with enhanced text selection.\r\nconst TEXT_LAYER_MODE = 2;\r\n// externalLinkTarget:\r\n// Controls how external links will be opened.\r\n//  0 = default.\r\n//  1 = replaces current window.\r\n//  2 = new window/tab.\r\n//  3 = parent.\r\n//  4 = in top window.\r\nconst EXTERNAL_LINK_TARGET = 2;\r\n// Limit canvas size to 5 mega-pixels on mobile.\r\n// Support: Android, iOS\r\nconst MAX_MOBILE_IMAGE_SIZE = 5242880;\r\nconst CMAP_PACKED = true;\r\nconst DEFAULT_SCALE = 1.0;\r\nconst CSS_UNITS = 96 / 72;\r\nconst DEFAULT_SCALE_DELTA = 1.1;\r\nconst MIN_SCALE = 0.25;\r\nconst MAX_SCALE = 10.0;\r\n// Default zoom level of the viewer. Accepted values: 'auto', 'page-actual', 'page-width', 'page-height', 'page-fit', or a zoom level in percents.\r\nconst DEFAULT_SCALE_VALUE = \"auto\";\r\n\r\n\r\nclass EngagePDFViewer {\r\n\r\n\t/**\r\n\t * Construct a PDF viewer for the specified container.\r\n\t * @param viewerContainer the view container.\r\n\t */\r\n\tconstructor(viewerContainer) {\r\n\t\tthis.viewerContainer = viewerContainer;\r\n\t\tif (typeof viewerContainer === \"string\")\r\n\t\t\tthis.viewerContainer = document.getElementById(viewerContainer);\r\n\t\telse\r\n\t\t\tthis.viewerContainer = viewerContainer;\r\n\t\tthis.pdfContainer = document.createElement(\"div\");\r\n\t\tthis.pdfContainer.classList.add(\"pdfViewerContainer\");\r\n\t\tthis.viewerContainer.appendChild(this.pdfContainer);\r\n\t\tif (!this.viewerContainer.hasAttribute(\"id\")) {\r\n\t\t\tthis.viewerContainer.setAttribute(\"id\", generateId());\r\n\t\t}\r\n\r\n\t\tthis.pdfLoadingTask = null;\r\n\t\tthis.pdfDocument = null;\r\n\t\tthis.pdfViewer = null;\r\n\t\tthis.pdfHistory = null;\r\n\t\tthis.pdfLinkService = null;\r\n\t\tthis.l10n = null;\r\n\t\tthis.metadata = null;\r\n\t\tthis.documentInfo = null;\r\n\t\tthis.eventBus = new pdfjsViewer.EventBus({dispatchToDOM: false});\r\n\t\t//this.scrollToPage = 0;\r\n\t\tthis._createUI();\r\n\r\n\t\tif (typeof ResizeObserver != \"undefined\") {\r\n\t\t\tthis.lastContainerSize = null;\r\n\t\t\tthis.resizeObserver = new ResizeObserver(entries => {\r\n\t\t\t\tfor (let entry of entries) {\r\n\t\t\t\t\tlet newWidth = entry.contentRect.width;\r\n\t\t\t\t\tif (this.lastContainerSize != null && this.lastContainerSize !== newWidth) {\r\n\t\t\t\t\t\t//console.log(\"ResizeObserver calling rescaleIfNecessary(). \"+newWidth + \" from \" + this.lastContainerSize);\r\n\t\t\t\t\t\tthis._rescaleIfNecessary();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Touch support for activating and deactivating scrollbars (if setup in CSS)\r\n\t\tthis.viewerContainer.addEventListener('touchstart', (evt) => {\r\n\t\t\tthis.viewerContainer.classList.add(\"active\");\r\n\t\t\tthis.pdfContainer.classList.add(\"active\");\r\n\t\t});\r\n\t\tdocument.documentElement.addEventListener(\"touchstart\", (evt) => {\r\n\t\t\tconst path = evt.path || (evt.composedPath && evt.composedPath());\r\n\t\t\tif (!path) return;\r\n\t\t\tconst found = path.find((el) => el.classList && el.classList.contains(\"engage-pdfviewer\"));\r\n\t\t\tif (!found) {\r\n\t\t\t\t// console.log(\"Touched outside pdf viewer. Deactivating.\");\r\n\t\t\t\tthis.viewerContainer.classList.remove(\"active\");\r\n\t\t\t\tthis.pdfContainer.classList.remove(\"active\");\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst zoomer = (evt) => {\r\n\t\t\t// console.log(\"zoom zoom\", evt);\r\n\t\t\tconst deltaY = evt.deltaY;\r\n\t\t\tif (deltaY < 0) {\r\n\t\t\t\tthis.zoomIn(Math.log(Math.abs(deltaY)) | 0);\r\n\t\t\t} else {\r\n\t\t\t\tthis.zoomOut(Math.log(Math.abs(deltaY)) | 0);\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.pdfContainer.addEventListener('wheel', (evt) => {\r\n\t\t\tif (evt.ctrlKey && !fullScreenApi.isFullscreen()) {\r\n\t\t\t\tevt.preventDefault();\r\n\t\t\t\tzoomer(evt);\r\n\t\t\t}\r\n\t\t});\r\n\t\tdocument.addEventListener('wheel', (evt) => {\r\n\t\t\tif (evt.ctrlKey && fullScreenApi.isFullscreen()) {\r\n\t\t\t\tzoomer(evt);\r\n\t\t\t}\r\n\t\t});\r\n\t\t// this.eventBus.on(\"scalechanging\", (evt) => {\r\n\t\t// \tif (this.scrollToPage === 0 && evt.source === this.pdfViewer) {\r\n\t\t// \t\tthis.scrollToPage = this.pdfViewer.currentPageNumber;\r\n\t\t// \t\t// console.log(\"scalechanging, page = \" + this.pdfViewer.currentPageNumber, evt);\r\n\t\t// \t}\r\n\t\t// });\r\n\t\t// this.eventBus.on(\"updateviewarea\", (evt) => {\r\n\t\t// \tif (this.scrollToPage > 0  && evt.source === this.pdfViewer) {\r\n\t\t// \t\t// console.log(\"updateviewarea, scroll to page = \" + this.scrollToPage, evt);\r\n\t\t// \t\tconst newPageNumber = this.scrollToPage;\r\n\t\t// \t\tthis.scrollToPage = 0;\r\n\t\t// \t\tsetTimeout(() => {\r\n\t\t// \t\t\tthis.scrollPageIntoView(newPageNumber);\r\n\t\t// \t\t}, 10);\r\n\t\t// \t}\r\n\t\t// });\r\n\t}\r\n\r\n\t/**\r\n\t * Open a PDF.\r\n\t * @param options are: url, worker_url, and cmap_url, max_mobile_image_size. \"url\" is required.\r\n\t */\r\n\topen(options) {\r\n\t\tanimationStartedPromise.then(() => this._open(options));\r\n\t}\r\n\r\n\tget title() {\r\n\t\tlet pdfTitle, md = this.metadata, info = this.documentInfo;\r\n\t\tif (md && md.has(\"dc:title\")) {\r\n\t\t\tvar title = md.get(\"dc:title\");\r\n\t\t\t// Ghostscript sometimes returns 'Untitled', so prevent setting the title to 'Untitled.\r\n\t\t\tif (title !== \"Untitled\") {\r\n\t\t\t\tpdfTitle = title;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!pdfTitle && info && info[\"Title\"]) {\r\n\t\t\tpdfTitle = info[\"Title\"];\r\n\t\t}\r\n\t\treturn pdfTitle;\r\n\t}\r\n\r\n\tget pagesCount() {\r\n\t\tlet doc = this.pdfDocument;\r\n\t\tif (doc) return doc.numPages;\r\n\t\telse return 0;\r\n\t}\r\n\r\n\tset page(val) {\r\n\t\tthis.pdfViewer.currentPageNumber = val;\r\n\t\t// Builtin scrolling does not work with our usage\r\n\t\tthis.scrollPageIntoView(val)\r\n\t}\r\n\r\n\tget page() {\r\n\t\treturn this.pdfViewer.currentPageNumber;\r\n\t}\r\n\r\n\tscrollPageIntoView(pageNumber) {\r\n\t\tconst page = this.pdfContainer.querySelector(`[data-page-number=\"${pageNumber}\"]`);\r\n\t\tif (page) {\r\n\t\t\tpage.scrollIntoView();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Closes opened PDF document.\r\n\t * @returns {Promise} - Returns the promise, which is resolved when all\r\n\t * destruction is completed.\r\n\t */\r\n\tclose() {\r\n\t\tthis.error.setAttribute(\"hidden\", \"\");\r\n\r\n\t\tif (!this.pdfLoadingTask) {\r\n\t\t\treturn Promise.resolve();\r\n\t\t}\r\n\r\n\t\tconst promise = this.pdfLoadingTask.destroy();\r\n\t\tthis.pdfLoadingTask = null;\r\n\r\n\t\tif (this.pdfDocument) {\r\n\t\t\tthis.pdfDocument = null;\r\n\r\n\t\t\tthis.pdfViewer.setDocument(null);\r\n\t\t\tthis.pdfLinkService.setDocument(null, null);\r\n\r\n\t\t\tif (this.pdfHistory) {\r\n\t\t\t\tthis.pdfHistory.reset();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn promise;\r\n\t}\r\n\r\n\tshowLoadingBar() {\r\n\t\tthis.loadingBar.value = 0;\r\n\t\tthis.loadingBar.removeAttribute(\"hidden\");\r\n\t}\r\n\r\n\thideLoadingBar() {\r\n\t\tthis.loadingBar.setAttribute(\"hidden\", \"\");\r\n\t}\r\n\r\n\tzoomIn(ticks, scaleFactor = DEFAULT_SCALE_DELTA) {\r\n\t\tlet newScale = this.pdfViewer.currentScale;\r\n\t\tdo {\r\n\t\t\tnewScale = (newScale * scaleFactor).toFixed(4);\r\n\t\t} while (--ticks && newScale < MAX_SCALE);\r\n\t\tnewScale = Math.ceil(newScale * 100) / 100;\r\n\t\tnewScale = Math.min(MAX_SCALE, newScale);\r\n\t\tthis.pdfViewer.currentScaleValue = newScale;\r\n\t}\r\n\r\n\tzoomOut(ticks, scaleFactor = DEFAULT_SCALE_DELTA) {\r\n\t\tlet newScale = this.pdfViewer.currentScale;\r\n\t\tconst page = this.page;\r\n\t\tdo {\r\n\t\t\tnewScale = (newScale / scaleFactor).toFixed(4);\r\n\t\t} while (--ticks && newScale > MIN_SCALE);\r\n\t\tnewScale = Math.floor(newScale * 100) / 100;\r\n\t\tnewScale = Math.max(MIN_SCALE, newScale);\r\n\t\tthis.pdfViewer.currentScaleValue = newScale;\r\n\t}\r\n\r\n\t_open(options) {\r\n\t\tif (this.pdfLoadingTask) {\r\n\t\t\treturn this.close().then(\r\n\t\t\t\t\tfunction () {\r\n\t\t\t\t\t\t// ... and repeat the open() call.\r\n\t\t\t\t\t\treturn this._open(params);\r\n\t\t\t\t\t}.bind(this)\r\n\t\t\t);\r\n\t\t}\r\n\t\tif (options.worker_url && pdfjsLib.GlobalWorkerOptions.workerSrc !== options.worker_url) {\r\n\t\t\tpdfjsLib.GlobalWorkerOptions.workerSrc = options.worker_url;\r\n\t\t}\r\n\t\tthis.url = options.url;\r\n\t\t// Loading document.\r\n\t\tlet docOptions = {\r\n\t\t\turl: options.url,\r\n\t\t};\r\n\t\tif (isIOS || isAndroid)\r\n\t\t\tdocOptions.maxImageSize = options.max_mobile_image_size || MAX_MOBILE_IMAGE_SIZE;\r\n\t\tconst loadingTask = pdfjsLib.getDocument(docOptions);\r\n\t\tthis.pdfLoadingTask = loadingTask;\r\n\t\tthis.showLoadingBar();\r\n\t\tthis._clearData();\r\n\t\tloadingTask.onProgress = (progressData) => {\r\n\t\t\tthis.loadingBar.max = progressData.total | 0;\r\n\t\t\tthis.loadingBar.value = progressData.loaded | 0;\r\n\t\t};\r\n\t\treturn loadingTask.promise.then(\r\n\t\t\t\t(pdfDocument) => {\r\n\t\t\t\t\t// Document loaded, specifying document for the viewer.\r\n\t\t\t\t\tthis.pdfDocument = pdfDocument;\r\n\t\t\t\t\tthis.pdfViewer.setDocument(pdfDocument);\r\n\t\t\t\t\tthis.pdfLinkService.setDocument(pdfDocument);\r\n\t\t\t\t\tthis.pdfHistory.initialize({fingerprint: pdfDocument.fingerprint});\r\n\t\t\t\t\tthis.hideLoadingBar();\r\n\t\t\t\t\tthis.toolbar.removeAttribute(\"hidden\");\r\n\t\t\t\t\tthis._loadMetaData();\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tif (this.pagesCount === 1) {\r\n\t\t\t\t\t\t\tthis.pagerTotal.parentNode.remove();\r\n\t\t\t\t\t\t\tthis.previousPageButton.parentNode.remove();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 50);\r\n\t\t\t\t},\r\n\t\t\t\t(exception) => {\r\n\t\t\t\t\tlet message = exception && exception.message;\r\n\t\t\t\t\tlet l10n = this.l10n;\r\n\t\t\t\t\tlet loadingErrorMessage;\r\n\r\n\t\t\t\t\tif (exception instanceof pdfjsLib.InvalidPDFException) {\r\n\t\t\t\t\t\t// change error message also for other builds\r\n\t\t\t\t\t\tloadingErrorMessage = l10n.get(\r\n\t\t\t\t\t\t\t\t\"invalid_file_error\",\r\n\t\t\t\t\t\t\t\tnull,\r\n\t\t\t\t\t\t\t\t\"Invalid or corrupted PDF file.\"\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} else if (exception instanceof pdfjsLib.MissingPDFException) {\r\n\t\t\t\t\t\t// special message for missing PDFs\r\n\t\t\t\t\t\tloadingErrorMessage = l10n.get(\r\n\t\t\t\t\t\t\t\t\"missing_file_error\",\r\n\t\t\t\t\t\t\t\tnull,\r\n\t\t\t\t\t\t\t\t\"Missing PDF file.\"\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} else if (exception instanceof pdfjsLib.UnexpectedResponseException) {\r\n\t\t\t\t\t\tloadingErrorMessage = l10n.get(\r\n\t\t\t\t\t\t\t\t\"unexpected_response_error\",\r\n\t\t\t\t\t\t\t\tnull,\r\n\t\t\t\t\t\t\t\t\"Unexpected server response.\"\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tloadingErrorMessage = l10n.get(\r\n\t\t\t\t\t\t\t\t\"loading_error\",\r\n\t\t\t\t\t\t\t\tnull,\r\n\t\t\t\t\t\t\t\t\"An error occurred while loading the PDF.\"\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tloadingErrorMessage.then((msg) => {\r\n\t\t\t\t\t\tthis._showError(msg + \"\\n\" + message);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.hideLoadingBar();\r\n\t\t\t\t\tthis.toolbar.setAttribute(\"hidden\", \"\");\r\n\t\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\t_clearData() {\r\n\t\tthis.metadata = null;\r\n\t\tthis.documentInfo = null;\r\n\t}\r\n\r\n\t_showError(msg) {\r\n\t\tthis.error.removeAttribute(\"hidden\");\r\n\t\tthis.error.value = msg;\r\n\t}\r\n\r\n\t_createUI() {\r\n\t\tthis.pdfContainer.appendChild(this._createPDFViewer());\r\n\t\tthis.viewerContainer.appendChild(this._createLoadingBar());\r\n\t\tthis.viewerContainer.appendChild(this._createErrorViewer());\r\n\t\tthis.viewerContainer.appendChild(this._createToolBar());\r\n\t\tthis._initUI();\r\n\t}\r\n\r\n\t_createPDFViewer() {\r\n\t\tlet div = document.createElement(\"div\");\r\n\t\tdiv.classList.add(\"pdfViewer\");\r\n\t\tthis.viewer = div;\r\n\t\treturn div;\r\n\t}\r\n\r\n\t_createLoadingBar() {\r\n\t\tlet element = document.createElement(\"progress\");\r\n\t\telement.setAttribute(\"hidden\", \"\");\r\n\t\telement.classList.add(\"loadingBar\");\r\n\t\tthis.loadingBar = element;\r\n\t\treturn element;\r\n\t}\r\n\r\n\t_createErrorViewer() {\r\n\t\tlet element = document.createElement(\"textarea\");\r\n\t\telement.setAttribute(\"hidden\", \"\");\r\n\t\telement.setAttribute(\"readonly\", \"readonly\");\r\n\t\telement.classList.add(\"error\");\r\n\t\tthis.error = element;\r\n\t\treturn element;\r\n\t}\r\n\r\n\t_createToolBar() {\r\n\t\tlet bar = document.createElement(\"div\");\r\n\t\tbar.classList.add(\"toolbar\");\r\n\t\tbar.appendChild(this._createNavButtons());\r\n\t\tbar.appendChild(this._createPager());\r\n\t\tbar.appendChild(this._createZoomButtons());\r\n\t\tbar.appendChild(this._createDownloadButton());\r\n\t\tbar.appendChild(this._createFullscreenButton());\r\n\t\tthis.toolbar = bar;\r\n\t\treturn bar;\r\n\t}\r\n\r\n\t_createNavButtons() {\r\n\t\tlet container = document.createElement(\"div\");\r\n\t\tcontainer.classList.add(\"nav-con\");\r\n\t\tlet previous = document.createElement(\"button\");\r\n\t\tprevious.classList.add(\"btn\");\r\n\t\tprevious.classList.add(\"nav-btn\");\r\n\t\tprevious.classList.add(\"previous-btn\");\r\n\t\tprevious.setAttribute(\"title\", \"Previous Page\");\r\n\t\tprevious.setAttribute(\"type\", \"button\");\r\n\t\tprevious.innerText = \"Previous\";\r\n\t\tcontainer.appendChild(previous);\r\n\t\tlet next = document.createElement(\"button\");\r\n\t\tnext.classList.add(\"btn\");\r\n\t\tnext.classList.add(\"nav-btn\");\r\n\t\tnext.classList.add(\"next-btn\");\r\n\t\tnext.innerText = \"Next\";\r\n\t\tnext.setAttribute(\"title\", \"Next Page\");\r\n\t\tnext.setAttribute(\"type\", \"button\");\r\n\t\tcontainer.appendChild(next);\r\n\t\tprevious.addEventListener(\"click\", () => {\r\n\t\t\tthis.page--;\r\n\t\t});\r\n\t\tnext.addEventListener(\"click\", () => {\r\n\t\t\tthis.page++;\r\n\t\t});\r\n\t\tthis.previousPageButton = previous;\r\n\t\tthis.nextPageButton = next;\r\n\t\treturn container;\r\n\t}\r\n\r\n\t_createPager() {\r\n\t\tlet container = document.createElement(\"div\");\r\n\t\tcontainer.classList.add(\"pager-con\");\r\n\t\tlet pagerLabel = document.createElement(\"label\");\r\n\t\tlet inputId = generateId();\r\n\t\tpagerLabel.setAttribute(\"for\", inputId);\r\n\t\tpagerLabel.innerText = \"Page\";\r\n\t\tpagerLabel.classList.add(\"pager-label\");\r\n\t\tcontainer.appendChild(pagerLabel);\r\n\t\tlet pageNumber = document.createElement(\"input\");\r\n\t\tpageNumber.setAttribute(\"id\", inputId);\r\n\t\tpageNumber.setAttribute(\"type\", \"number\");\r\n\t\tpageNumber.setAttribute(\"size\", \"3\");\r\n\t\tpageNumber.setAttribute(\"value\", \"1\");\r\n\t\tpageNumber.classList.add(\"pager-number\");\r\n\t\tpageNumber.addEventListener(\"click\", function (evt) {\r\n\t\t\tevt.preventDefault();\r\n\t\t\tevt.stopPropagation();\r\n\t\t\tthis.select();\r\n\t\t});\r\n\t\tpageNumber.addEventListener(\"change\", () => {\r\n\t\t\tlet newPage = pageNumber.value;\r\n\t\t\tif (newPage === '') return;\r\n\t\t\tthis.page = parseInt(newPage, 10);\r\n\t\t\tpageNumber.value = this.page;\r\n\t\t});\r\n\t\tcontainer.appendChild(pageNumber);\r\n\t\tlet pageTotal = document.createElement(\"span\");\r\n\t\tpageTotal.classList.add(\"pager-total\");\r\n\t\tcontainer.appendChild(pageTotal);\r\n\t\tthis.pagerNumber = pageNumber;\r\n\t\tthis.pagerTotal = pageTotal;\r\n\t\treturn container;\r\n\t}\r\n\r\n\t_createZoomButtons() {\r\n\t\tlet container = document.createElement(\"div\");\r\n\t\tcontainer.classList.add(\"zoom-con\");\r\n\t\tlet zoomOut = document.createElement(\"button\");\r\n\t\tzoomOut.classList.add(\"btn\");\r\n\t\tzoomOut.classList.add(\"zoom-btn\");\r\n\t\tzoomOut.classList.add(\"zoom-out-btn\");\r\n\t\tzoomOut.setAttribute(\"title\", \"Zoom Out\");\r\n\t\tzoomOut.setAttribute(\"type\", \"button\");\r\n\t\tzoomOut.textContent = \"-\";\r\n\t\tcontainer.appendChild(zoomOut);\r\n\t\tlet zoomIn = document.createElement(\"button\");\r\n\t\tzoomIn.classList.add(\"btn\");\r\n\t\tzoomIn.classList.add(\"zoom-btn\");\r\n\t\tzoomIn.classList.add(\"zoom-in-btn\");\r\n\t\tzoomIn.setAttribute(\"title\", \"Zoom In\");\r\n\t\tzoomIn.setAttribute(\"type\", \"button\");\r\n\t\tzoomIn.textContent = \"+\";\r\n\t\tcontainer.appendChild(zoomIn);\r\n\t\tzoomIn.addEventListener(\"click\", (evt) => {\r\n\t\t\tevt.preventDefault();\r\n\t\t\tevt.stopPropagation();\r\n\t\t\tthis.zoomIn();\r\n\t\t});\r\n\t\tzoomOut.addEventListener(\"click\", (evt) => {\r\n\t\t\tevt.preventDefault();\r\n\t\t\tevt.stopPropagation();\r\n\t\t\tthis.zoomOut();\r\n\t\t});\r\n\t\treturn container;\r\n\t}\r\n\r\n\t_getParentAttribute(el, attributeName) {\r\n\t\tif (el === document || el === undefined || el == null) return null;\r\n\t\tvar parent = el;\r\n\t\twhile (parent != document.body && parent != null) {\r\n\t\t\tif (parent.getAttribute(attributeName)) {\r\n\t\t\t\treturn parent.getAttribute(attributeName);\r\n\t\t\t}\r\n\t\t\tparent = parent.parentNode;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\t_createDownloadButton() {\r\n\t\tlet download = document.createElement(\"button\");\r\n\t\tdownload.classList.add(\"btn\");\r\n\t\tdownload.classList.add(\"download-btn\");\r\n\t\tdownload.setAttribute(\"title\", \"Download\");\r\n\t\tdownload.setAttribute(\"type\", \"button\");\r\n\r\n\t\tlet fileName = this._getParentAttribute(this.viewerContainer, 'data-file-label');\r\n\t\tlet fileId = this._getParentAttribute(this.viewerContainer, 'data-file-id');\r\n\r\n\t\tif (fileName != null && fileId != null) {\r\n\t\t\tdownload.setAttribute(\"data-ga-on\", \"click\");\r\n\t\t\tdownload.setAttribute(\"data-ga-event-category\", \"Asset - Document\");\r\n\t\t\tdownload.setAttribute(\"data-ga-event-action\", \"Download\");\r\n\t\t\tdownload.setAttribute(\"data-ga-event-label\", fileName);\r\n\t\t\tdownload.setAttribute(\"data-ga-event-value\", fileId);\r\n\t\t}\r\n\r\n\t\tdownload.textContent = \"Download\";\r\n\t\tdownload.addEventListener(\"click\", (evt) => {\r\n\t\t\tevt.preventDefault();\r\n\t\t\tevt.stopPropagation();\r\n\t\t\twindow.location = this.url;\r\n\t\t});\r\n\t\treturn download;\r\n\t}\r\n\r\n\t_createFullscreenButton() {\r\n\t\tlet fullscreenButton = document.createElement(\"button\");\r\n\t\tfullscreenButton.classList.add(\"btn\");\r\n\t\tfullscreenButton.classList.add(\"fullscreen-btn\");\r\n\t\tfullscreenButton.setAttribute(\"title\", \"Switch To Presentation Mode\");\r\n\t\tfullscreenButton.setAttribute(\"type\", \"button\");\r\n\t\tfullscreenButton.innerText = \"Full Screen\";\r\n\t\tthis.fullscreenButton = fullscreenButton;\r\n\t\treturn fullscreenButton;\r\n\t}\r\n\r\n\t_initUI() {\r\n\t\tthis.pdfLinkService = new pdfjsViewer.PDFLinkService({\r\n\t\t\teventBus: this.eventBus,\r\n\t\t\texternalLinkTarget: EXTERNAL_LINK_TARGET,\r\n\t\t});\r\n\t\tthis.l10n = pdfjsViewer.NullL10n;\r\n\t\tlet pdfViewerOptions = {\r\n\t\t\tcontainer: this.pdfContainer,\r\n\t\t\tlinkService: this.pdfLinkService,\r\n\t\t\tl10n: this.l10n,\r\n\t\t\tuseOnlyCssZoom: USE_ONLY_CSS_ZOOM,\r\n\t\t\ttextLayerMode: TEXT_LAYER_MODE,\r\n\t\t\teventBus: this.eventBus,\r\n\t\t\tcMapPacked: CMAP_PACKED,\r\n\t\t};\r\n\t\tif (isAndroid) {\r\n\t\t\t// Workaround poor pinch-zoom behavior by disabling text layer.\r\n\t\t\tpdfViewerOptions.textLayerMode = 0;\r\n\t\t}\r\n\t\tlet pdfViewer = new pdfjsViewer.PDFViewer(pdfViewerOptions);\r\n\t\tthis.pdfViewer = pdfViewer;\r\n\t\tthis.pdfLinkService.setViewer(pdfViewer);\r\n\r\n\t\tthis.pdfHistory = new pdfjsViewer.PDFHistory({\r\n\t\t\tlinkService: this.pdfLinkService,\r\n\t\t\teventBus: this.eventBus,\r\n\t\t});\r\n\t\tthis.pdfLinkService.setHistory(this.pdfHistory);\r\n\t\tif (fullScreenApi.supportsFullscreen) {\r\n\t\t\tthis.fullscreenButton.addEventListener('click', () => {\r\n\t\t\t\tif (fullScreenApi.isFullscreen()) {\r\n\t\t\t\t\tfullScreenApi.exitFullscreen();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfullScreenApi.requestFullscreen(this.viewerContainer);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdocument.addEventListener(fullScreenApi.fullscreenEventName, (evt) => {\r\n\t\t\t\tif (evt.target.id !== this.viewerContainer.id) {\r\n\t\t\t\t\t// console.log(\"evt not for me\", evt);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (fullScreenApi.isFullscreen()) {\r\n\t\t\t\t\tthis.viewerContainer.classList.add(\"fullscreen\");\r\n\t\t\t\t\tthis.fullscreenButton.innerText = \"Exit Full Screen\";\r\n\t\t\t\t\tthis.pdfViewer.currentScaleValue = \"page-actual\";\r\n\t\t\t\t\tthis.scrollPageIntoView(this.page);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.viewerContainer.classList.remove(\"fullscreen\");\r\n\t\t\t\t\tthis.fullscreenButton.innerText = \"Full Screen\";\r\n\t\t\t\t\tthis.pdfViewer.currentScaleValue = DEFAULT_SCALE_VALUE;\r\n\t\t\t\t\tthis.scrollPageIntoView(this.page);\r\n\t\t\t\t\tthis._rescaleIfNecessary();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.fullscreenButton.remove();\r\n\t\t}\r\n\r\n\t\tthis.eventBus.on(\"pagesinit\", () => {\r\n\t\t\t// We can use pdfViewer now, e.g. let's change default scale.\r\n\t\t\tthis.pdfViewer.currentScaleValue = DEFAULT_SCALE_VALUE;\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis._handleNavigationEnabling();\r\n\t\t\t\tthis._rescaleIfNecessary();\r\n\t\t\t}, 10);\r\n\r\n\t\t\tif (this.resizeObserver) {\r\n\t\t\t\tthis.lastContainerSize = this.viewerContainer.clientWidth;\r\n\t\t\t\tthis.resizeObserver.observe(this.viewerContainer);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.eventBus.on(\"pagechanging\", () => {\r\n\t\t\t\t\tthis._handleNavigationEnabling();\r\n\t\t\t\t},\r\n\t\t\t\ttrue\r\n\t\t);\r\n\t}\r\n\r\n\t_rescaleIfNecessary(tryCount) {\r\n\t\tlet newTryCount = (tryCount || 0) + 1;\r\n\t\tif (newTryCount > 10) {\r\n\t\t\tconsole.log(`Giving up trying to rescale for div#${this.viewerContainer.id}.`);\r\n\t\t\treturn;\r\n\t\t}/* else {\r\n\t\t\tconsole.log(`Rescale try#${newTryCount} for div#${this.viewerContainer.id}`);\r\n\t\t}*/\r\n\t\tsetTimeout(() => {\r\n\t\t\tlet hasScrollBar = this.pdfContainer.scrollWidth > this.pdfContainer.clientWidth;\r\n\t\t\t// console.log(`div#${this.viewerContainer.id} hasScrollBar=${hasScrollBar}`);\r\n\t\t\tif (hasScrollBar) {\r\n\t\t\t\tthis.pdfViewer.currentScaleValue = DEFAULT_SCALE_VALUE;\r\n\t\t\t\tthis._rescaleIfNecessary(newTryCount);\r\n\t\t\t}\r\n\t\t}, 50);\r\n\t}\r\n\r\n\t_handleNavigationEnabling() {\r\n\t\tlet page = this.page;\r\n\t\tlet numPages = this.pagesCount;\r\n\t\tthis.pagerNumber.value = page;\r\n\t\tthis.pagerTotal.innerText = `of ${numPages}`;\r\n\t\tthis.previousPageButton.disabled = page <= 1;\r\n\t\tthis.nextPageButton.disabled = page >= numPages;\r\n\t}\r\n\r\n\t_loadMetaData() {\r\n\t\tthis.pdfDocument.getMetadata().then((data) => {\r\n\t\t\tthis.documentInfo = data.info;\r\n\t\t\tthis.metadata = data.metadata;\r\n\r\n\t\t\t// Provides some basic debug information\r\n\t\t\tconsole.log(\r\n\t\t\t\t\t\"PDF \" +\r\n\t\t\t\t\tthis.pdfDocument.fingerprint +\r\n\t\t\t\t\t\", \" + (data.info.Title || data.info.Subject || this.title || \"-\") +\r\n\t\t\t\t\t\" [\" +\r\n\t\t\t\t\tdata.info.PDFFormatVersion +\r\n\t\t\t\t\t\" \" +\r\n\t\t\t\t\t(data.info.Producer || \"-\").trim() +\r\n\t\t\t\t\t\" / \" +\r\n\t\t\t\t\t(data.info.Creator || \"-\").trim() +\r\n\t\t\t\t\t\"]\" +\r\n\t\t\t\t\t(data.info.IsAcroFormPresent ? \" AcroForm \" : \"\") +\r\n\t\t\t\t\t\" (PDF.js: \" +\r\n\t\t\t\t\t(pdfjsLib.version || \"-\") +\r\n\t\t\t\t\t\")\"\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport default EngagePDFViewer;\r\n","const fullScreenApi = {\r\n\tsupportsFullscreen: false,\r\n\tisFullscreen: function () {\r\n\t\treturn false;\r\n\t},\r\n\trequestFullscreen: function () {\r\n\t},\r\n\texitFullscreen: function () {\r\n\t},\r\n\tfullscreenEventName: '',\r\n\tprefix: ''\r\n};\r\nconst browserPrefixes = 'webkit moz o ms khtml'.split(' ');\r\n\r\n// check for native support\r\nif (typeof document.cancelFullScreen !== 'undefined') {\r\n\tfullScreenApi.supportsFullscreen = true;\r\n} else if(typeof document.exitFullscreen !== 'undefined') {\r\n\tfullScreenApi.supportsFullscreen = true;\r\n} else {\r\n\t// check for fullscreen support by vendor prefix\r\n\tfor (let i = 0, il = browserPrefixes.length; i < il; i++ ) {\r\n\t\tfullScreenApi.prefix = browserPrefixes[i];\r\n\t\tif (typeof document[fullScreenApi.prefix + 'CancelFullScreen' ] != 'undefined' ) {\r\n\t\t\tfullScreenApi.supportsFullscreen = true;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// update methods to do something useful\r\nif (fullScreenApi.supportsFullscreen) {\r\n\tfullScreenApi.fullscreenEventName = fullScreenApi.prefix + 'fullscreenchange';\r\n\r\n\tfullScreenApi.isFullscreen = function() {\r\n\t\tswitch (this.prefix) {\r\n\t\t\tcase '':\r\n\t\t\t\treturn document.fullScreen ||\r\n\t\t\t\t\t\t(typeof document.fullscreenElement !== 'undefined' && document.fullscreenElement !== null);\r\n\t\t\tcase 'webkit':\r\n\t\t\t\treturn document.webkitIsFullScreen;\r\n\t\t\tdefault:\r\n\t\t\t\treturn document[this.prefix + 'FullScreen'];\r\n\t\t}\r\n\t};\r\n\tfullScreenApi.requestFullscreen = function requestFullScreen(el) {\r\n\t\treturn (this.prefix === '') ? el.requestFullscreen() : el[this.prefix + 'RequestFullScreen']();\r\n\t};\r\n\tfullScreenApi.exitFullscreen = function exitFullScreen() {\r\n\t\treturn (this.prefix === '') ? document.exitFullscreen() : document[this.prefix + 'CancelFullScreen']();\r\n\t}\r\n}\r\n\r\nexport default fullScreenApi;"],"sourceRoot":""}